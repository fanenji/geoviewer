<!DOCTYPE HTML>

<html lang="it">
<head>
    <meta charset="utf-8">

    <title>Test servizi Geoserver</title>

    <link rel="stylesheet" type="text/css" href="/geoviewer/stili/extjs/resources/css/ext-all-gray.css"/>
    <link rel="stylesheet" type="text/css" href="/geoviewer/stili/default/base.css"/>

    <!--         <script type="text/jvascript" src="/geoviewer/lib/ExtJs4/ext-all-debug.js"></script> -->
    <!--         <script type="text/javascript" src="/geoviewer/lib/ExtJs/ext-debug.js"></script> -->
    <!--         <script type="text/javascript" src="/geoviewer/lib/ExtJs/ext.js"></script> -->

    <script type="text/javascript" src="/geoviewer/lib/ExtJs/ext-debug.js"></script>

    <script src="http://maps.googleapis.com/maps/api/js?sensor=false&v=3.2&language=it"></script>
    <script src="/geoviewer/lib/OpenLayers/OpenLayers.js" type="text/javascript"></script>
    <script src='/geoviewer/lib/proj4js/lib/proj4js-min.js'></script>

    <script src="/geoviewer/lib/Cwn2/cwn2-debug.js"></script>

</head>
<body>

<script>

Ext.application({

    name: 'CWN2_APP',

    launch: function() {
        var navigazione = {
            "items": [
                { "name": "pan" },
                { "name": "zoomin" },
                { "name": "zoomout" },
                { "name": "fitall" },
                { "name": "zoomToInitialExtent" },
                { "name": "zoomprevious" },
                { "name": "zoomnext" }
            ]
        };

        var misurazioni = {
            "items": [
                { "name": "measureline" },
                { "name": "measurearea" }
            ]
        };

        var avanzate = {
            "name": "avanzate",
            "items": [
                {"name": "infowms" },
                {"name": "transparency" },
                {"name": "loadlayers",
                    "panels": [
                        {
                            "type": "layerTree",
                            "name": "Temi",
                            "options": {
                                "treeServiceUrl": "/geoservices/REST/corem/load_layer_tree/",
                                "layersConfigServiceUrl": "/geoservices/REST/corem/load_layer_config/"
                            }
                        },
                        {
                            "type": "mapTree",
                            "name": "PTR",
                            "options": {
                                "treeServiceUrl": "/geoservices/REST/config/ag_canale_tree/102"
                            }
                        },
                        {
                            "type": "mapTree",
                            "name": "Repertorio Cartografico",
                            "options": {
                                "treeServiceUrl": "/geoservices/REST/config/rep_carto_tree/03"
                            }
                        }
                    ]
                },
                {"name": "removelayers" },
                {"name": "find",
                    "panels": [
                        {
                            "type": "layer",
                            "name": "Livello"
                        },
                        {
                            "type": "indirizzo",
                            "name": "Indirizzo"
                        }
                    ]
                },
                {"name": "selectfeature",
                    "options": {
                        "idLayer": "L26,L27,L28",
                        "flagSelezioneSingola": true,
                        "radius": 5
                    }
                },
                {"name": "routeplanner",
                    "options": {
                        "flagLimitaTerritorioLigure": "true"
                    }
                },
                {"name": "s3ricerche",
                    "options": {
                        id: "s3ricerche",
                        url: "/sigmater/script/CwRicercaParticellaRepertorio.asp",
                        render: "panel"
                    }
                }
            ]
        };

        var toolbarConfig = {
            "itemGroups": [
                navigazione,
                misurazioni,
                avanzate

            ]
        };

        var config = {
            "application": {
                "mapOptions": {
                    //"maxScale": "50000",
                    "restrictedExtent": "830036,5402959,1123018,5597635"
                },
                "layout": {

                    "statusBar": true,
                    "legend": {
                        "type": "simple",
                        "position": "east",
                        "collapsed": false
                    },
                    "widgets": [
                        { "name": "Scale" },
                        { "name": "CoordinateReadOut" }
                    ],
                    "toolbar": toolbarConfig
                }
            },
            "baseLayers": [
                { "type": "no_base" },
                { "type": "rl_carte_base", visible: true},
                { "type": "rl_ortofoto_2010" },
                { "type": "OSM" }
            ],
            "layers": []
        };

        CWN2.Globals.RL_MAP_CONFIG_SERVICE = "http://parodi.datasiel.net/geoservices/REST/config/map/";

        CWN2.app.load({
            appConfig: config,
            idMap: "1505", //"1439",
            flagGeoserver: true,
            debug: true
        });

    } //eo launch

});


</script>

</body>
</html>
