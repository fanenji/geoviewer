<!DOCTYPE HTML>

<html> 
    <head> 
        <title>Esempio Window</title> 

        <link rel="stylesheet" type="text/css" href="/cartowebNet2/lib/ExtJs/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="/cartowebNet2/stili/default/base.css" />

        <script src="http://maps.google.com/maps/api/js?sensor=false&v=3.2&language=it"></script>
        <script src="/cartowebNet2/lib/OL/OpenLayers.js" type="text/javascript"></script>
		<!-- proj4js -->
        <script src='/cartowebNet2/lib/proj4js/lib/proj4js-min.js'></script>
		<!-- jQuery -->
        <script src="/cartowebNet2/lib/jQuery/jquery-1.7.min.js"></script> 
		<!-- ExtJs -->
        <script src="/cartowebNet2/lib/ExtJs/ext-all-full.js"></script>
		<!-- GeoExt -->
		<script src="/cartowebNet2/lib/GeoExt/script/GeoExt.js"></script>
		<!-- CWN2 -->
		<script src="/cartowebNet2/lib/Cwn2/cwn2-debug.js"></script>



	</head>
	<body>
		<br>
		Esempio di utilizzo di CWN2 su finestra in pop-up.<br>
		Vengono inoltre evidenziati alcuni oggetti del layer in base al loro ID.<br>
		Clicca sul bottone per aprire la finestra.<br><br>  
		<input type=button value='Show map (ID = 1)' onclick='javascript:showMap("1");'><br><br>
		<input type=button value='Show map (ID = 2)' onclick='javascript:showMap("2");'>

		<!-- codice js della applicazione -->
		<script>

            var showMap;
            var app;

			Ext.onReady(function() {
			    Ext.QuickTips.init();
			
				var initConfig = {
					appConfig: 'http://dcarto3.datasiel.net:5984/cwn2_config/EsempioWindow',
					divID: null,
					callBack: null,
                    proxy: "/CartoWebNet2/services/proxy/proxy.ashx?url=",
					debug:true
				};
                app = new CWN2.Application(initConfig);

                showMap = function(id) {

                    // Rendo visibile la finestra mappa
                    app.showMapWindow();

                    // Effettuo l'hilite delle feature.
                    var item = [id];
                    var hiliteConf = {
                            "layerName": "Prova",
                            "filter" : {
                                "type": "BY_ATTRIBUTE",
                                "attrName": "ID",
                                "items": item
                            },
                            "options": {
                                "zoom": true
                            }
                    };
                    app.resetHilite(hiliteConf);
                    app.hiliteFeatures(hiliteConf);

                };

			});
			

		</script> 

	</body>
</html>
