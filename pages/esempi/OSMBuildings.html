<!DOCTYPE HTML>

<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <meta charset="utf-8">
    <title>Prova OSMBuildings</title>

    <!-- librerie css -->
    <link rel="stylesheet" type="text/css" href="/geoviewer/stili/extjs/resources/css/ext-all-gray.css"/>
    <link rel="stylesheet" type="text/css" href="/geoviewer/stili/default/base.css"/>
    <link rel="stylesheet" type="text/css" href="repertorio.css"/>
    <!-- librerie js -->
    <script src="http://maps.google.com/maps/api/js?sensor=false&v=3.2&language=it"></script>
    <script src="/geoviewer/lib/OpenLayers/OpenLayers.js" type="text/javascript"></script>
    <script src="/geoviewer/lib/Cwn2/deploy-config.js"></script>

    <script src='/geoviewer/lib/proj4js/lib/proj4js-min.js'></script>
    <script src="/geoviewer/lib/ExtJs/ext.js"></script>
    <script src="/geoviewer/lib/ExtJs/locale/ext-lang-it.js"></script>
    <script src="/geoviewer/lib/Cwn2/cwn2-debug.js"></script>
    <script src="/geoviewer/lib/Cwn2/deploy-config.js"></script>

    <script src="/geoviewer/lib/OSMBuildings-OpenLayers.js"></script>


    <!-- custom js -->

    <script>
        Ext.application({
            name: 'repertorio',
            launch: function() {
                var toolbar = {
                    "scale": "small",
                    "itemGroups": [
                        {
                            "items": [
                                { "name": "pan" },
                                { "name": "zoomin" },
                                { "name": "zoomout" },
                                //{ "name": "fitall" },
                                { "name": "zoomToInitialExtent" },
                                { "name": "zoomprevious" },
                                { "name": "zoomnext" }
                            ]
                        },
                        {
                            "items": [
                                { "name": "measureline" },
                                { "name": "measurearea" }
                            ]
                        },
                        {
                            "items": [
                                {"name": "infowms",
                                    "options": {
                                        //radius: 100
                                    }
                                },
                                {"name": "transparency" },
                                {"name": "loadlayers",
                                    "panels": [
                                        {
                                            "type": "mapTree",
                                            "name": "Repertorio Cartografico",
                                            "options": {
                                                "treeServiceUrl": "http://geoportale.regione.liguria.it/geoservices/REST/config/rep_carto_tree/03"
                                            }
                                        },
                                        {
                                            "type": "wms",
                                            "name": "Livelli WMS",
                                            "options": {}
                                        },
                                        {
                                            "type": "kml",
                                            "name": "File KML/GPX",
                                            "options": {}
                                        }

                                    ]
                                },
                                {"name": "removelayers" },
                                {"name": "find", "panels": [
                                    { "type": "layer", "name": "Livello" },
                                    { "type": "coordinate", "name": "Coordinate" }
                                ]},
                                {"name": "routeplanner", "options": { "flagLimitaTerritorioLigure": "true" }},
                                {"name": "print" },
                                {"type": "combo", "name": "geocoder"}


                            ]
                        },
                        {
                            "name": "sfondi",
                            "align": "right",
                            "items": [
                                {"type": "combo", "name": "base-layers"}
                                /*
                                 ,{
                                 "name": "simpleLegend",
                                 "options": { noBaseLayerGrid: true }
                                 }
                                 */
                            ]
                        }
                    ]
                };

                var config = {
                    "application": {
                        "mapOptions": {
                            "displayProjection": "EPSG:4326",
                            "initialExtent": "830036,5402959,1123018,5597635",
                            "restrictedExtent": "600000,5300000,1300000,5700000"
                        },
                        "layout": {
                            "header": {
                                "html": "<div><table><tr><td><img src='http://geoportale.regione.liguria.it/geoviewer/img/logo_regioneliguria_chiaro.jpg' ></td><td>&nbsp;&nbsp;</td><td><div id='titolo'></div></td></tr></table></div>",
                                "height": 85,
                                "style": {
                                    "background-color": "#99cccc"
                                }
                            },
                            "statusBar": true,
                            "legend": {
                                "type": "tree",
                                "position": "east",
                                "noBaseLayerGrid": true
                            },
                            "widgets": [
                                { "name": "ScaleCombo" },
                                { "name": "CoordinateReadOut" }
                            ],
                            "toolbar": toolbar
                        }
                    },
                    "baseLayers": [
                        { "type": "no_base" },
                        { "type": "rl_ortofoto_2013" },
                        { "type": "rl_carte_base"},
                        { "type": "OSM" },
                        { "type": "google_terrain" },
                        { "type": "google_roadmap" },
                        { "type": "google_satellite"}
                    ]
                };

                CWN2.app.load({
                    appConfig: config,
                    idMap: null,
                    callBack: function () {
                        new OSMBuildings(CWN2.app.map).load();
                    },
                    loadBaseLayers: true,
                    debug: true,
                    setMapTitle: 'titolo'
                });


            } //eo launch
        });





    </script>

</head>

<body>
</body>

</html>
		