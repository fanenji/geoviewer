<!DOCTYPE HTML>

<html>
    <head> 
        <title>Esempio Mappa Simple</title> 

		<!-- 
			<script type="text/javascript" src="https://getfirebug.com/firebug-lite.js"></script> 
		-->
		<!-- librerie js -->
        <script src="http://maps.google.com/maps/api/js?sensor=false&v=3.2&language=it"></script>
		<script src="/cartowebNet2/lib/openlayers-openlayers-86de065/lib/OpenLayers.js" type="text/javascript"></script>

        <script>
      
                  function init() {
      
                          OpenLayers.Layer.Vector.prototype.renderers = ["Canvas"];
      
                          // map
                          var mapOptions =  {
                            "projection": "EPSG:900913",
                            "maxExtent": new OpenLayers.Bounds.fromString("830036.283895,5402959.60361,1123018.973727,5597635.329038"),
                            "units": "m"
                          };
      
                          var map = new OpenLayers.Map(mapOptions);
      
                          // google base layer
                          var layer1 = new OpenLayers.Layer.Google(
                              "Google Satellite",
                              {type: google.maps.MapTypeId.SATELLITE, numZoomLevels: 22}
                          );
                          map.addLayer(layer1);
      
                          // vactor layer
                          var layer2 = new OpenLayers.Layer.Vector();
                          layer2.projection = new OpenLayers.Projection("EPSG:4326")
                          layer2.styleMap = new OpenLayers.StyleMap(
                              {
                                  "default" : {
                                    "fillColor": null,
                                    "fillOpacity": 0.0,
                                    "strokeColor": null,
                                    "strokeOpacity": 0.0,
                                    "strokeWidth": 0,
                                    "strokeLinecap": null,
                                    "strokeDashstyle": null,
                                    "pointRadius": 0,
                                    "externalGraphic": "http://srvcarto.regione.liguria.it/CartoWebNet2/img/icons/events/alien.png",
                                    "graphicWidth": 32,
                                    "graphicHeight": 37,
                                    "graphicOpacity": 1.0,
                                    "graphicXOffset": -16,
                                    "graphicYOffset": -37,
                                    "rotation": 0,
                                    "graphicName": null,
                                    "cursor": "pointer",
                                    "display": null
                                  }
                              }
                          );
                          map.addLayer(layer2);
      
                          // Attiva il controllo OL "SelectFeature" per l'hover
                          var hoverFeatureControl = new OpenLayers.Control.SelectFeature(layer2, {
                              hover: true,
                              renderIntent: "temporary",
                              highlightOnly: true,
                              eventListeners: {
                                  featurehighlighted:function(e){
                                      console.log('featurehighlighted')
                                  },
                                  featureunhighlighted:function(e){
                                  }
                              }
                          });
                          map.addControl(hoverFeatureControl);
                          hoverFeatureControl.activate();
      
                          map.render("cwn2_map");
      
                          // faccio zoom su initialExtent
                          map.zoomToExtent(mapOptions.maxExtent);
      
                          var features = { "type": "FeatureCollection",
                              "features": [
                                  { "type": "Feature",
                                    "geometry": {"type": "Point", "coordinates": [8.0, 44.5]},
                                      "properties": {
                                          "label": "Prova 1 "
                                      }
                                  },
                                  { "type": "Feature",
                                    "geometry": {"type": "Point", "coordinates": [9.0, 44.5]},
                                      "properties": {
                                          "label": "Prova 2"
                                      }
                                  }
                               ]
                          };
      
                          var format_geojson = new OpenLayers.Format.GeoJSON({
                              'internalProjection': new OpenLayers.Projection(layer2.map.projection),
                              'externalProjection': layer2.projection
                          });
                          var featureCollection =  format_geojson.read(features);
                          layer2.addFeatures(featureCollection);
      
                  }
      
      
      		</script>
        

	</head>
    <body onload="init()">

		<!-- div contenente la mappa -->
		<div id="cwn2_map" style="position: absolute;width: 600px;height: 400px"></div>

	</body>
</html>
