<!DOCTYPE HTML>

<html> 
    <head> 
        <title>Esempio Acquisizione</title>

        <!-- CSS -->
        <link rel="stylesheet" type="text/css" href="/cartowebNet2/lib/ExtJs/resources/css/ext-all.css" />
        <link rel="stylesheet" type="text/css" href="/cartowebNet2/lib/ExtJs/resources/css/xtheme-gray.css" />
        <link rel="stylesheet" type="text/css" href="/cartowebNet2/stili/default/base.css" />
		<!-- librerie js -->
        <script src="http://maps.google.com/maps/api/js?sensor=false&v=3.2&language=it"></script>
		<script src="/cartowebNet2/lib/OL/OpenLayers.js" type="text/javascript"></script>
        <!-- proj4js -->
		<script src='/cartowebNet2/lib/proj4js/lib/proj4js-min.js'></script>
		<!-- jQuery -->
        <script src="/cartowebNet2/lib/jQuery/jquery-1.7.min.js"></script>
		<!-- ExtJs -->
        <script src="/cartowebNet2/lib/ExtJs/ext-all-full.js"></script>
 		<!-- GeoExt -->
		<script src="/cartowebNet2/lib/GeoExt/script/GeoExt.js"></script>
		<!-- CWN2 -->
		<script src="/cartowebNet2/lib/Cwn2/cwn2-debug.js"></script>

	</head>
	<body>

		<br><br>
		Esempio di Acquisizione Punti. <br><br>
        <input type=button value=' Coordinate ' onclick='javascript:getPointCoordinate();'><br><br>

		<!-- div contenente la mappa -->
		<div id="mappanel"></div>


		<!-- codice js della applicazione -->
		<script>



			$(function() {

                Ext.QuickTips.init();

                var config =
{
   "_id": "esempio_edit",
   "_rev": "27-5722ebb8f2ddbe0e8bf4c5e1c156e0a8",
   "descrizione": "Esempio Acquisizione Punti",
   "application": {
       "id": 1,
       "mapOptions": {
           "restrictedExtent": "830036,5402959,1123018,5597635",
           "displayProjection": "EPSG:4326",
           "olControls": [
               {
                   "name": "LayerSwitcher2"
               },
               {
                   "name": "Zoom"
               }
           ]
       },
       "layout": {
           "id": 1,
           "type": "panel",
           "title": "Esempio Panel",
           "language": "it",
           "statusBar": true,
           "extRequired": true,
           "width": 800,
           "height": 600,
           "legend": null,
           "widgets": [
               {
                   "id": 1,
                   "type": "widget",
                   "name": "Scale"
               },
               {
                   "id": 2,
                   "type": "widget",
                   "name": "CoordinateReadOut"
               }
           ],
           "toolbar": {
               "id": 1,
               "name": "ToolBar Prova su EULERO",
               "itemGroups": [
                   {
                       "name": "navigazione",
                       "items": [
                           {
                               "type": "button",
                               "name": "pan",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "zoomin",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "zoomout",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "fitall",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "zoomToInitialExtent",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "zoomprevious",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "zoomnext",
                               "options": {
                               }
                           }
                       ]
                   },
                   {
                       "name": "editing",
                       "items": [
                           {
                               "type": "button",
                               "name": "drawPoint",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "drawLine",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "drawPolygon",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "modifyFeature",
                               "options": {
                               }
                           },
                           {
                               "type": "button",
                               "name": "dragFeature",
                               "options": {}
                           },
                           {
                               "type": "button",
                               "name": "deleteFeature",
                               "options": {}
                           }
                       ]
                   }
               ]
           }
       }
   },
   "baseLayers": [
       {
           "id": 1,
           "idAppl": 1,
           "idBaseLayer": 3,
           "type": "google_roadmap",
           "name": "Google_Stradario",
           "minZoomLevel": 8,
           "maxZoomLevel": 18,
           "projection": null,
           "legend": {
               "label": "Google Stradario",
               "icon": "http://parodis-dts-pc.datasiel.net/CartoWebNet2/img/legend/google_stradario.png",
               "popUpUrl": null,
               "popUpWidth": 0,
               "popUpHeight": 0
           },
           "visible": false
       },
       {
           "id": 6,
           "idAppl": 1,
           "idBaseLayer": 2,
           "type": "google_satellite",
           "name": "Google_Satellite",
           "minZoomLevel": 8,
           "maxZoomLevel": 18,
           "projection": null,
           "legend": {
               "label": "Google Satellite",
               "icon": "http://parodis-dts-pc.datasiel.net/CartoWebNet2/img/legend/google_satellite.png",
               "popUpUrl": null,
               "popUpWidth": 0,
               "popUpHeight": 0
           },
           "visible": true
       }
   ],
   "layers": [

   ]
};

				var initConfig = {
					appConfig: config,
					divID: 'mappanel',
					callBack: null,
                    proxy: "/CartoWebNet2/services/proxy/proxy.ashx?url=",
					debug:true
				};
				var app = new CWN2.Application(initConfig);

                getPointCoordinate = function() {
                    var geom = CWN2.Editor.getEditingGeom(app.map,"WKT");
                    if (geom) {
                        console.log(geom);
                    } else {
                        console.log(null);
                    }
                };



			});
			
		</script> 

	</body>
</html>
